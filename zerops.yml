zerops:
  - setup: golang1
    build:
      base:
        - go@1
        - nodejs@20
      buildCommands:
        - go install github.com/a-h/templ/cmd/templ@latest
        - ./bin/templ generate
        - npm i tailwind
        - npx tailwind -i ./assets/app.css -o ./public/app.css
        - export ENVIRONMENT="PROD"; go build -o bin/app ./app/
      deployFiles:
        - ./bin/~/app
        - ./public/
    run:
      base: go@1
      ports:
        - port: 4200
          httpSupport: true
      start: ./app
